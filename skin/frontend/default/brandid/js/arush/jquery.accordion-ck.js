(function(e,t,n){var r=t.event,i;r.special.smartresize={setup:function(){t(this).bind("resize",r.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",r.special.smartresize.handler)},handler:function(e,t){var n=this,r=arguments;e.type="smartresize";i&&clearTimeout(i);i=setTimeout(function(){jQuery.event.handle.apply(n,r)},t==="execAsap"?0:100)}};t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])};t.Accordion=function(e,n){this.$el=t(n);this.$items=this.$el.children("ul").children("li");this.itemsCount=this.$items.length;this._init(e)};t.Accordion.defaults={open:-1,oneOpenedItem:!1,speed:600,easing:"easeInOutExpo",scrollSpeed:900,scrollEasing:"easeInOutExpo"};t.Accordion.prototype={_init:function(e){this.options=t.extend(!0,{},t.Accordion.defaults,e);this._validate();this.current=this.options.open;this.$items.find("div.st-content").hide();this._saveDimValues();this.current!=-1&&this._toggleItem(this.$items.eq(this.current));this._initEvents()},_saveDimValues:function(){this.$items.each(function(){var e=t(this);e.data({originalHeight:e.height(),offsetTop:e.offset().top})})},_validate:function(){if(this.options.open<-1||this.options.open>this.itemsCount-1)this.options.open=-1},_initEvents:function(){var n=this;this.$items.find("a.opener").bind("click.accordion",function(e){var r=t(this).closest("li");n.options.oneOpenedItem&&n._isOpened()&&n.current!==r.index()&&n._toggleItem(n.$items.eq(n.current));n._toggleItem(r);return!1});t(e).bind("smartresize.accordion",function(e){n._saveDimValues();n.$el.find("li.st-open").each(function(){var e=t(this);e.css("height",e.data("originalHeight")+e.find("div.st-content").outerHeight(!0))})})},_isOpened:function(){return this.$el.find("li.st-open").length>0},_toggleItem:function(e){var t=e.find("div.st-content");e.hasClass("st-open")?(this.current=-1,t.stop(!0,!0).fadeOut(this.options.speed),e.removeClass("st-open").stop().animate({height:e.data("originalHeight")},this.options.speed,this.options.easing)):(this.current=e.index(),t.stop(!0,!0).fadeIn(this.options.speed),e.addClass("st-open").stop().animate({height:e.data("originalHeight")+t.outerHeight(!0)},this.options.speed,this.options.easing))},_scroll:function(e){var e=e||this,n;e.current!==-1?n=e.current:n=e.$el.find("li.st-open:last").index();t("html, body").stop().animate({scrollTop:e.options.oneOpenedItem?e.$items.eq(n).data("offsetTop"):e.$items.eq(n).offset().top},e.options.scrollSpeed,e.options.scrollEasing)}};var s=function(e){this.console&&console.error(e)};t.fn.accordion=function(e){if(typeof e=="string"){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var r=t.data(this,"accordion");if(!r){s("cannot call methods on accordion prior to initialization; attempted to call method '"+e+"'");return}if(!t.isFunction(r[e])||e.charAt(0)==="_"){s("no such method '"+e+"' for accordion instance");return}r[e].apply(r,n)})}else this.each(function(){var n=t.data(this,"accordion");n||t.data(this,"accordion",new t.Accordion(e,this))});return this}})(window,jQuery);